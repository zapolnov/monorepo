
* ѕереименование в gltf_node и т.п.

namespace ruis::gltf


*  ак правильно просунуть updater в play_animation?
---

animation - из JSON
animation_state - воспроизвод€ща€ анимаци€ (одна)
animator - объедин€ющий объект (менеджер) воспроизводимых сейчас анимаций
animator ::<- updateable? остановитьс€, когда анимации закончились

play_animation, массив animation_state переезжают из gltf в animator

вместо класса animation у нас теперь animator €вл€етс€ updateable и анимации обновл€ютс€ в его апдейте
и он сам запускает себ€ и останавливает по мере необходимости

---

¬ read_accessor сейчас груз€тс€ в видеопам€ть абсолютно все данные.
ѕредлагаетс€ вынести vbo/ibo из структуры accessor в отдельную структуру (используемую только на этапе загрузки) - дл€ повышени€ читаемости
и создавать vbo/ibo только дл€ тех данных, которые требуютс€ мешам.

ј дл€ анимаций создаем
struct gltf_animation_data {
    <== variant векторов
};
используем эту ссылку на animation_data, но уже он будет без vbo/ibo

“.е. accessor существует только на этапе загрузки, а затем он сохран€етс€ либо в видеопам€ть в форме primitive,
либо в ќ«” в форме animation_data.

» в animation_sampler ссылки на accessor (input/output) превращаютс€ в ссылки на animation_data.

---

scene_renderer => должен быть visitor, без перманентного стейта.
весь перманентный стейт должен быть в scene_view.
“ам же мы храним список активных анимаций и передаем его в scene_renderer из scene_view.
аниматор опционален. если его нет - рендерим статику
аниматор получает ссылку на gltf в конструкторе

----

в gltf этот массив не нужен:
std::vector<utki::shared_ref<node>> nodes{}

---

слетает cmake на повторной перегенерации

1>CMake Error at D:/Work/monorepo/out/msvc2022/utki/utki-config.cmake:7 (include):
1>  include could not find requested file:
1>
1>    D:/Work/monorepo/out/msvc2022/utki/utki-targets.cmake
1>Call Stack (most recent call first):
1>  D:/Work/monorepo/out/vcpkg/scripts/buildsystems/vcpkg.cmake:893 (_find_package)
1>  D:/Work/monorepo/repos/myci/src/cmake/modules/myci.cmake:38 (find_package)
1>  D:/Work/monorepo/repos/myci/src/cmake/modules/myci.cmake:593 (myci_private_find_package)
1>  D:/Work/monorepo/repos/myci/src/cmake/modules/myci.cmake:685 (myci_private_write_find_packages_to_config_file)
1>  D:/Work/monorepo/repos/myci/src/cmake/modules/myci.cmake:779 (myci_private_generate_config_file)
1>  D:/Work/monorepo/repos/myci/src/cmake/modules/myci.cmake:952 (myci_export)
1>  D:/Work/monorepo/repos/papki/build/cmake/CMakeLists.txt:24 (myci_declare_library)
1>
1>
